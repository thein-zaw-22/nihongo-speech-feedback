{% extends 'base.html' %}
{% block title %}Change Password{% endblock %}
{% block content %}
<style>
  .auth-page { max-width: 480px; margin: 0 auto; }
  .auth-card { padding: 1.5rem; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: var(--shadow-sm); }
  .auth-title { text-align: center; font-size: 1.6rem; font-weight: 700; margin-bottom: .25rem; background: linear-gradient(135deg, var(--brand), var(--brand-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .auth-subtitle { text-align: center; color: var(--text-muted); margin-bottom: 1rem; }
  .field { display: flex; flex-direction: column; gap: .35rem; margin-bottom: .85rem; }
  .field label { font-weight: 600; color: var(--text-secondary); font-size: .95rem; }
  /* Match Profile form input sizing */
  .input { width: 100%; box-sizing: border-box; padding: .5rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-primary); color: var(--text-primary); font-size: 1rem; }
  .input:focus { outline: none; border-color: var(--brand); box-shadow: 0 0 0 3px rgba(102,126,234,.12); }
  .error-box { background: #fde2e2; color: #b91c1c; border: 1px solid #fecaca; border-left: 4px solid #ef4444; padding: .75rem 1rem; border-radius: 12px; margin-bottom: .85rem; }
  .actions { display: flex; gap: .75rem; align-items: center; justify-content: center; margin-top: .5rem; }
  .auth-card .btn { display:inline-flex; align-items:center; justify-content:center; gap:.4rem; padding:.75rem 1rem; border:none; border-radius:8px; font-weight:700; cursor:pointer; text-decoration:none; }
  .auth-card .btn-primary { background: linear-gradient(135deg, var(--brand), var(--brand-2)); color:#fff; }
  .auth-card .btn-secondary { background: rgba(102,126,234,.1); color: var(--brand); border: 1px solid rgba(102,126,234,.25); }
</style>

<div class="auth-page">
  <div class="auth-card">
    <div class="auth-title">Change password</div>
    <div class="auth-subtitle">Use a strong, unique password</div>

    {% if form.non_field_errors %}
      <div class="error-box">{{ form.non_field_errors }}</div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}

      <div class="field">
        <label>Current password</label>
        {{ form.current_password }}
        {% if form.current_password.errors %}<small class="error-box" style="margin:0;">{{ form.current_password.errors|striptags }}</small>{% endif %}
      </div>

      <div class="field">
        <label>New password</label>
        {{ form.new_password }}
        <small class="help">At least 8 characters.</small>
        {% if form.new_password.errors %}<small class="error-box" style="margin:0;">{{ form.new_password.errors|striptags }}</small>{% endif %}
      </div>

      <div class="field">
        <label>Confirm new password</label>
        {{ form.confirm_password }}
        {% if form.confirm_password.errors %}<small class="error-box" style="margin:0;">{{ form.confirm_password.errors|striptags }}</small>{% endif %}
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">Update Password</button>
        <a class="btn btn-secondary" href="{% url 'profile' %}">Cancel</a>
      </div>
    </form>
  </div>
  
</div>
{% endblock %}
