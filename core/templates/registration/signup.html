{% extends 'base.html' %}
{% block title %}Register{% endblock %}
{% block content %}
<style>
  .auth-page { max-width: 520px; margin: 0 auto; }
  .auth-card { padding: 1.5rem; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: var(--shadow-sm); }
  .auth-title { text-align: center; font-size: 1.6rem; font-weight: 700; margin-bottom: .25rem; background: linear-gradient(135deg, var(--brand), var(--brand-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .auth-subtitle { text-align: center; color: var(--text-muted); margin-bottom: 1rem; }
  .field { display: flex; flex-direction: column; gap: .35rem; margin-bottom: .85rem; }
  .field label { font-weight: 600; color: var(--text-secondary); font-size: .95rem; }
  .input { width: 100%; box-sizing: border-box; padding: .8rem 1rem; border: 2px solid var(--border-color); border-radius: 12px; background: var(--bg-primary); color: var(--text-primary); font-size: 1rem; }
  .input:focus { outline: none; border-color: var(--brand); box-shadow: 0 0 0 3px rgba(102,126,234,.12); }
  .error-box { background: #fde2e2; color: #b91c1c; border: 1px solid #fecaca; border-left: 4px solid #ef4444; padding: .75rem 1rem; border-radius: 12px; margin-bottom: .85rem; }
  .actions { display: flex; gap: .75rem; align-items: center; justify-content: center; margin-top: .5rem; }
  .auth-card .btn { display:inline-flex; align-items:center; justify-content:center; gap:.4rem; padding:.75rem 1rem; border:none; border-radius:8px; font-weight:700; cursor:pointer; text-decoration:none; }
  .auth-card .btn-primary { background: linear-gradient(135deg, var(--brand), var(--brand-2)); color:#fff; }
  .auth-card .btn-secondary { background: rgba(102,126,234,.1); color: var(--brand); border: 1px solid rgba(102,126,234,.25); }
  .links { text-align:center; color: var(--text-secondary); margin-top: .75rem; }
  .links a { color: var(--brand); font-weight: 700; text-decoration: none; }
  .links a:hover { text-decoration: underline; }
  .toggle { position: absolute; right: .75rem; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--text-muted); font-size: .9rem; }
  .pw-wrap { }
  .input-wrap { position: relative; width: 100%; }
  .input-wrap .input { padding-right: 2.3rem; }
  small.help { color: var(--text-muted); }
</style>

<div class="auth-page">
  <div class="auth-card">
    <div class="auth-title">Create your account</div>
    <div class="auth-subtitle">Itâ€™s fast and free</div>

    {% if form.non_field_errors %}
      <div class="error-box">{{ form.non_field_errors }}</div>
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}

      <div class="field">
        <label for="id_username">Username</label>
        <input id="id_username" name="username" type="text" class="input" placeholder="yourname" value="{{ form.username.value|default:'' }}" autocomplete="username" required>
        {% if form.username.errors %}<small class="error-box" style="margin:0;">{{ form.username.errors|striptags }}</small>{% endif %}
      </div>

      <div class="field pw-wrap">
        <label for="id_password1">Password</label>
        <div class="input-wrap">
          <input id="id_password1" name="password1" type="password" class="input" placeholder="Create a password" autocomplete="new-password" required>
          <span class="toggle" onclick="togglePw('id_password1', this)">Show</span>
        </div>
        {% if form.password1.help_text %}<small class="help">{{ form.password1.help_text|safe }}</small>{% endif %}
        {% if form.password1.errors %}<small class="error-box" style="margin:0;">{{ form.password1.errors|striptags }}</small>{% endif %}
      </div>

      <div class="field pw-wrap">
        <label for="id_password2">Confirm Password</label>
        <div class="input-wrap">
          <input id="id_password2" name="password2" type="password" class="input" placeholder="Repeat your password" autocomplete="new-password" required>
          <span class="toggle" onclick="togglePw('id_password2', this)">Show</span>
        </div>
        {% if form.password2.errors %}<small class="error-box" style="margin:0;">{{ form.password2.errors|striptags }}</small>{% endif %}
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">Create Account</button>
      </div>
    </form>

    <div class="links">Already have an account? <a href="{% url 'login' %}">Login</a></div>
  </div>
</div>

<script>
  function togglePw(id, el){ const i = document.getElementById(id); if(!i) return; const is = i.type === 'password'; i.type = is ? 'text':'password'; el.textContent = is ? 'Hide' : 'Show'; }
</script>
{% endblock %}
